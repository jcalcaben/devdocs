<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Magento 2.2 backward incompatible changes | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>



<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>

<!-- Hotjar Tracking Code for http://devdocs.magento.com/ -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:806243,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<!-- heap analytics -->
<script type="text/javascript">
      window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
      heap.load("2619540280");
</script>




	<link rel="canonical" href="/guides/v2.2/release-notes/backward-incompatible-changes/">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.2">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.2
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/release-notes/backward-incompatible-changes/index.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/release-notes/backward-incompatible-changes/index.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/release-notes/backward-incompatible-changes/index.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/release-notes/backward-incompatible-changes/index.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li><a href="/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Extension Update and System Upgrade Guide</a></li>
          
          <li><a href="/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          
          <li><a href="/guides/v2.2/performance-best-practices/index.html">Performance Best Practices</a></li>
          
          <li><a href="/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li><a href="/guides/v2.2/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a></li>
          <li><a href="/magento-release-information.html">Release Information</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">Backend</div>
        <ul>
          <li><a href="/guides/v2.2/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li><a href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li><a href="/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li>
          <li><a href="/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          <li><a href="/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Frontend</div>
        <ul>
          <li class=""><a href="/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li><a href="/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li>
          
          <li><a href="/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li><a href="/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li><a href="/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li><a href="/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li>
          <li><a href="/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li>
          
          
          <li><a href="/guides/v2.2/marketplace/eqp/api.html">Marketplace EQP API Reference</a></li>
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.2/test/testing.html">Magento Testing Guide</a></li>
        
        <li><a href="/guides/v2.2/magento-functional-testing-framework/release-2/introduction.html">Functional Acceptance Testing (New!)</a></li>
        
        <li><a href="/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li>
        <li><a href="/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li>
        <li><a href="/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li>
        <li><a href="/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
        <li><a href="/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
          <li class="leaf"><a href="/guides/v2.2/advanced-reporting/overview.html">Advanced Reporting</a></li>
          
        
        <li class="leaf"><a href="/guides/v2.2/b2b/bk-b2b.html">B2B</a></li>
        
        <li><a href="/guides/v2.2/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payment Integrations</a></li>
        
          <li><a href="/guides/v2.2/extension-dev-guide/staging.html">Staging</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.2/howdoi/bk-how-do-i.html">How To</a></li>
        
        <li><a  data-proofer-ignore href="/guides/v2.2/get-started/order-tutorial/order-intro.html">Order Processing with REST APIs</a></li>
        

        <li><a href="/videos/">Video Tutorials</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.2/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

    

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">Release Information</h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="introduction">
    

    
    <a href="/guides/v2.2/release-notes/bk-release-notes.html">Introduction</a>
    

    
</li>


		    
		    	

		    
		    	

<li class="nav-level1  " id="2.2-release-notes">
    

    
    <span>2.2 Release Notes</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="magento-open-source-2.2.4-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.4CE.html">Magento Open Source 2.2.4 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-2.2.4-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.4EE.html">Magento Commerce 2.2.4 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-open-source-2.2.3-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.3CE.html">Magento Open Source 2.2.3 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-2.2.3-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.3EE.html">Magento Commerce 2.2.3 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-open-source-2.2.2-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.2CE.html">Magento Open Source 2.2.2 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-2.2.2-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.2EE.html">Magento Commerce 2.2.2 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-open-source-2.2.1-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.1CE.html">Magento Open Source 2.2.1 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-2.2.1-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.1EE.html">Magento Commerce 2.2.1 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-open-source-2.2.0-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.0CE.html">Magento Open Source 2.2.0 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-2.2.0-release-notes">

            

            
            <a href="/guides/v2.2/release-notes/ReleaseNotes2.2.0EE.html">Magento Commerce 2.2.0 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-(cloud)-2.2.0-release-notes">

            

            
            <a href="/guides/v2.2/cloud/release-notes/CloudReleaseNotes2.2.html">Magento Commerce (Cloud) 2.2.0 Release Notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="component-status">

            

            
            <a href="/guides/v2.2/release-notes/release-candidate/component-status.html">Component Status</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

		    
		    	

		    
		    	

<li class="nav-level1  " id="backward-incompatible-changes">
    

    
    <a href="/guides/v2.2/release-notes/backward-incompatible-changes/index.html">Backward incompatible changes</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="magento-open-source-changes">

            

            
            <a href="/guides/v2.2/release-notes/backward-incompatible-changes/open-source.html">Magento Open Source changes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-changes">

            

            
            <a href="/guides/v2.2/release-notes/backward-incompatible-changes/commerce.html">Magento Commerce changes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-for-b2b-changes">

            

            
            <a href="/guides/v2.2/release-notes/changes/b2b_changes.html">Magento Commerce for B2B changes</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="third-party-licenses">
    

    
    <span>Third-party licenses</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="magento-open-source-third-party-licenses">

            

            
            <a href="/guides/v2.2/release-notes/thirdparty_ce.html">Magento Open Source third-party licenses</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-third-party-licenses">

            

            
            <a href="/guides/v2.2/release-notes/thirdparty_ee.html">Magento Commerce third-party licenses</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-commerce-(cloud)-third-party-licenses">

            

            
            <a href="/guides/v2.2/release-notes/thirdparty-mccloud.html">Magento Commerce (Cloud) third-party licenses</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/"><span>Home</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Magento 2.2 backward incompatible changes</span>

        

        <meta property="position" content="1" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">Magento 2.2 backward incompatible changes</h1>

  


</section>

			<p>Magento 2.2 introduces several major changes that may affect the correct functionality of already released external modules. The purpose of this document is to highlight major changes between Magento 2.1 and 2.2.</p>

<p>You can view the detailed lists of changes generated by the Semantic Version Checker using the following links:</p>

<ul>
  <li><a href="/guides/v2.2/release-notes/backward-incompatible-changes/open-source.html">Magento Open Source changes</a></li>
  <li><a href="/guides/v2.2/release-notes/backward-incompatible-changes/commerce.html">Magento Commerce changes</a></li>
</ul>

<h2 id="api-changes">API changes</h2>

<p>Magento 2.2 introduces changes in several <span term-uuid="786086f2-622b-4007-97fe-2c19e5283035" class="glossary-term" data-toggle="popover">API</span> classes. These changes are designed to extend overall API coverage and improve developer experience with new features.</p>

<h3 id="framework">Framework</h3>

<p>Magento no longer supports custom config file pools</p>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.2/lib/internal/Magento/Framework/App/DeploymentConfig/Reader.php" target="_blank"><code class="highlighter-rouge">Magento\Framework\App\DeploymentConfig\Reader</code></a><br />
<strong>Action:</strong> Deprecated the method <code class="highlighter-rouge">loadConfigFile</code><br /></p>

<h3 id="store-module">Store module</h3>

<p>The Store <span term-uuid="c1e4242b-1f1a-44c3-9d72-1d5b1435e142" class="glossary-term" data-toggle="popover">module</span> management has been updated to allow the retrieval of a store by its <span term-uuid="a3c8f20f-b067-414e-9781-06378c193155" class="glossary-term" data-toggle="popover">website</span> id.</p>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Store/Api/StoreWebsiteRelationInterface.php" target="_blank"><code class="highlighter-rouge">Magento\Store\Api\StoreWebsiteRelationInterface</code></a><br />
<strong>Action:</strong> New interface added with method <code class="highlighter-rouge">getStoreByWebsiteId($websiteId)</code></p>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Store/Model/StoreManager.php" target="_blank"><code class="highlighter-rouge">Magento\Store\Model\StoreManager</code></a><br />
<strong>Action:</strong> Implemented <code class="highlighter-rouge">StoreWebsiteRelationInterface</code> and added the inherited method <code class="highlighter-rouge">getStoreByWebsiteId($websiteId)</code><br /></p>

<p><strong>Description:</strong> Retrieves a store by website id<br /></p>

<p>New unique and required field <code class="highlighter-rouge">code</code> was added to the Store Group.</p>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Store/Api/Data/GroupInterface.php"><code class="highlighter-rouge">Magento\Store\Api\Data\GroupInterface</code></a><br />
<strong>Action:</strong> Added two methods <code class="highlighter-rouge">getCode()</code> and <code class="highlighter-rouge">setCode($code)</code><br /></p>

<h3 id="customer-module">Customer module</h3>

<p>Change was done in order to add default values to customer attributes.</p>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Eav/Api/Data/AttributeDefaultValueInterface.php" target="_blank"><code class="highlighter-rouge">Magento\Eav\Api\Data\AttributeDefaultValueInterface</code></a><br />
<strong>Action:</strong> New interface added with methods <code class="highlighter-rouge">getDefaultValue()</code> and <code class="highlighter-rouge">setDefaultValue($defaultValue)</code><br /></p>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Customer/Model/Data/AttributeMetadata.php" target="_blank"><code class="highlighter-rouge">Magento\Customer\Model\Data\AttributeMetadata</code></a><br />
<strong>Action:</strong> Implemented <code class="highlighter-rouge">AttributeDefaultValueInterface</code> and added the getter <code class="highlighter-rouge">getDefaultValue()</code> and setter <code class="highlighter-rouge">setDefaultValue($defaultValue)</code> methods<br /></p>

<p><strong>Description:</strong> Retrieve and set default values to customer attributes<br /></p>

<h3 id="wishlist-module">Wishlist module</h3>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Wishlist/Model/Wishlist.php" target="_blank"><code class="highlighter-rouge">Magento\Wishlist\Model\Wishlist</code></a><br />
<strong>Action:</strong> The format of the string for the <code class="highlighter-rouge">buyRequest</code> parameter in the <code class="highlighter-rouge">addNewItem</code> method changed from serialized to JSON.<br /></p>

<h3 id="recently-viewed-and-recently-compared-widgets">Recently Viewed and Recently Compared Widgets</h3>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.1/app/code/Magento/Reports/Block/Product/Viewed.php" target="_blank"><code class="highlighter-rouge">Magento\Reports\Block\Product\Viewed</code></a><br />
<strong>Action:</strong> Deprecated <br /></p>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.1/app/code/Magento/Reports/Block/Product/Compared.php" target="_blank"><code class="highlighter-rouge">Magento\Reports\Block\Product\Compared</code></a><br />
<strong>Action:</strong> Deprecated <br /></p>

<p><strong>Configuration</strong> <a href="https://github.com/magento/magento2/blob/2.1/app/code/Magento/Reports/etc/widget.xml" target="_blank"><code class="highlighter-rouge">Magento\Reports\etc\widget.xml</code></a><br />
<strong>Action:</strong> Removed <br /></p>

<p>Please note, that all inheritance of old widget.xml file will break Magento. Use <code class="highlighter-rouge">Magento/Catalog/etc/widget.xml</code> instead of <code class="highlighter-rouge">Magento/Reports/etc/widget.xml</code>.</p>

<h3 id="eav-module-changes">Eav Module Changes</h3>

<p>The class <code class="highlighter-rouge">\Magento\Eav\Model\Entity\Attribute\Backend\Serialized</code> has been marked as deprecated, <code class="highlighter-rouge">Magento\Eav\Model\Entity\Attribute\Backend\JsonEncoded</code> can be used instead.</p>

<h3 id="messagequeue-module-api">MessageQueue Module API</h3>

<p>The <code class="highlighter-rouge">Magento\Framework\MessageQueue\ConfigInterface</code> has been deprecated.
The following table lists the deprecated methods and their replacements.</p>

<table>
  <thead>
    <tr>
      <th>Deprecated method</th>
      <th>Use instead</th>
      <th>Subsequent calls</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">getExchangeByTopic($topicName);</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Publisher\ConfigInterface::getPublisher($topic)</code></td>
      <td>Call <code class="highlighter-rouge">getConnection()</code>  then <code class="highlighter-rouge">getExchange()</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getQueuesByTopic($topic);</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Topology\ConfigInterface::getQueues()</code></td>
      <td>Iterate and call <code class="highlighter-rouge">getName()</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getConnectionByTopic($topic);</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Publisher\ConfigInterface::getPublisher($topic)</code></td>
      <td><code class="highlighter-rouge">getConnection()</code> <code class="highlighter-rouge">getName()</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getConnectionByConsumer($consumer);</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Consumer\ConfigInterface::getConsumer($name)</code></td>
      <td><code class="highlighter-rouge">getConnection()</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getMessageSchemaType($topic);</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\Communication\ConfigInterface::getTopic($name)</code></td>
      <td>Use getter methods to return information from topic data.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getConsumer($name);</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Consumer\ConfigInterface::getConsumer($name)</code></td>
      <td>Extract necessary information using accessor methods.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getConsumerNames();</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Consumer\ConfigInterface::getConsumers()</code></td>
      <td>Iterate and use <code class="highlighter-rouge">getName()</code> on every item.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getBinds();</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Topology\ConfigInterface::getExchanges()</code></td>
      <td>Extract necessary information using accessor methods.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getPublishers();</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Publisher\ConfigInterface::getPublishers()</code></td>
      <td>Iterate and use getter methods.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getConsumers();</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Consumer\ConfigInterface::getConsumers()</code></td>
      <td>Iterate and use getter methods.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getTopic($name);</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\Communication\ConfigInterface::getTopic($name)</code> <code class="highlighter-rouge">\Magento\Framework\MessageQueue\Publisher\ConfigInterface::getPublisher($topic)</code></td>
      <td>Use <code class="highlighter-rouge">getTopic($name)</code> for topic information. Use <code class="highlighter-rouge">getPublisher($name)</code> for publisher-related clients.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getPublisher($name);</code></td>
      <td><code class="highlighter-rouge">\Magento\Framework\MessageQueue\Publisher\ConfigInterface::getPublisher($name)</code></td>
      <td>Use getter methods to return requested information.</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">getResponseQueueName($topicName);</code></td>
      <td>Magento\Framework\MessageQueue\Rpc\ResponseQueueNameBuilder::getQueueName($topicName)</td>
      <td>-</td>
    </tr>
  </tbody>
</table>

<h3 id="error-processor-module">Error processor module</h3>

<p><span term-uuid="53da11f1-d0b8-4a7e-b078-1e099462b409" class="glossary-term" data-toggle="popover">Exception</span> report files in <code class="highlighter-rouge">var/report</code> are now JSON encoded, and existing serialized files will not be readable by the upgraded Magento 2.2 instance.</p>

<h3 id="braintree-module">Braintree module</h3>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Braintree/Model/Ui/ConfigProvider.php" target="_blank"><code class="highlighter-rouge">Magento\Braintree\Model\Ui\ConfigProvider</code></a><br />
<strong>Action:</strong> The deprecated constant <code class="highlighter-rouge">PAYPAL_CODE</code> has been removed<br />
<strong>Description</strong> Use <code class="highlighter-rouge">\Magento\Braintree\Model\Ui\PayPal\ConfigProvider::PAYPAL_CODE</code> instead.<br /></p>

<h3 id="paypal-module">PayPal module</h3>

<p><strong>Class:</strong> <a href="https://github.com/magento/magento2/blob/2.2/app/code/Magento/Paypal/Cron/FetchReports.php" target="_blank"><code class="highlighter-rouge">Magento\Paypal\Cron\FetchReports</code></a><br />
<strong>Action:</strong></p>

<ul>
  <li>Method <code class="highlighter-rouge">execute</code> has been reworked and now throws an <code class="highlighter-rouge">\Exception</code> instead of logging it</li>
  <li>Method <code class="highlighter-rouge">__construction</code> no longer has the <code class="highlighter-rouge">\Psr\Log\LoggerInterface</code> dependency</li>
  <li>The <code class="highlighter-rouge">report_date</code> column from the <code class="highlighter-rouge">paypal_settlement_report</code> table has been changed from <code class="highlighter-rouge">timestamp</code> format to <code class="highlighter-rouge">date</code>.</li>
</ul>

<h2 id="changes-in-repositories">Changes in repositories</h2>

<p>In Magento 2.2 the behavior of repositories regarding the Filters added to Search Criteria  was unified:</p>

<ul>
  <li>The boolean OR statement joins Filters inside a single Filter Group.</li>
  <li>The boolean AND statement joins Filter Groups inside a Search Criteria.</li>
</ul>

<p>In the scope of this work, the following repositories were affected.</p>

<h3 id="affected-magento-open-source-repositories">Affected Magento Open Source repositories</h3>

<ul>
  <li><code class="highlighter-rouge">\Magento\Catalog\Api\AttributeSetRepositoryInterface </code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Api\CategoryAttributeRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Api\ProductAttributeGroupRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Api\ProductAttributeRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Cms\Api\BlockRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Cms\Api\PageRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Eav\Api\AttributeGroupRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Eav\Api\AttributeRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Eav\Api\AttributeSetRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\CreditmemoCommentRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\CreditmemoItemRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\CreditmemoRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\InvoiceCommentRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\InvoiceItemRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\InvoiceRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\OrderAddressRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\OrderItemRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\OrderPaymentRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\OrderStatusHistoryRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\ShipmentCommentRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\ShipmentItemRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\ShipmentRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\ShipmentTrackRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\TransactionRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Ui\Api\BookmarkRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Vault\Api\PaymentTokenRepositoryInterface</code></li>
</ul>

<h3 id="affected-magento-commerce-repositories">Affected Magento Commerce repositories</h3>

<ul>
  <li><code class="highlighter-rouge">\Magento\GiftCardAccount\Api\GiftCardAccountRepositoryInterface </code></li>
  <li><code class="highlighter-rouge">\Magento\GiftWrapping\Api\WrappingRepositoryInterface</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Api\CommentRepositoryInterface </code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Model\RmaRepository</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Model\Service\RmaManagement </code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Model\Rma\Status\HistoryRepository</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Api\RmaRepositoryInterface </code></li>
  <li><code class="highlighter-rouge">\Magento\Staging\Api\UpdateRepositoryInterface </code></li>
  <li><code class="highlighter-rouge">\Magento\VersionsCms\Api\HierarchyNodeRepositoryInterface</code></li>
</ul>

<p>For details about repositories see the <a href="/guides/v2.2/extension-dev-guide/searching-with-repositories.html">Searching with repositories</a> topic.</p>

<h2 id="changes-in-repositories-in-method-getlist">Changes in repositories in method getList</h2>

<p>In Magento 2.2 the signature of the method getList was unified across the code base.</p>

<p><code class="highlighter-rouge">public function getList(\Magento\Framework\Api\SearchCriteria $searchCriteria);</code>
was changed to
<code class="highlighter-rouge">public function getList(\Magento\Framework\Api\SearchCriteriaInterface $searchCriteria);</code></p>

<p>These changes won’t affect the clients that use these interfaces, but this will affect the extensions that implemented these interfaces.
In oder to adopt custom implementations of these interfaces, please, change method signature from <code class="highlighter-rouge">\Magento\Framework\Api\SearchCriteria</code> to <code class="highlighter-rouge">\Magento\Framework\Api\SearchCriteriaInterface</code> in your implementations.</p>

<h3 id="affected-magento-open-source-repositories-1">Affected Magento Open Source repositories</h3>

<ul>
  <li><code class="highlighter-rouge">\Magento\Vault\Api\PaymentTokenRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Tax\Api\TaxRuleRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\CreditmemoCommentRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\CreditmemoItemRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\CreditmemoRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\InvoiceCommentRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\InvoiceItemRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\InvoiceRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\OrderAddressRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\OrderItemRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\OrderPaymentRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\OrderRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\OrderStatusHistoryRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\ShipmentCommentRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\ShipmentItemRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\ShipmentRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\ShipmentTrackRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\TransactionRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Quote\Api\CartRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Vault\Model\PaymentTokenRepository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Tax\Model\TaxRuleRepository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\OrderRepository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\AddressRepository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\CreditmemoRepository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\InvoiceRepository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\ItemRepository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\ShipmentRepository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\Payment\Repository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\Payment\Transaction\Repository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Quote\Model\QuoteRepository::getList</code></li>
</ul>

<h3 id="affected-magento-commerce-repositories-1">Affected Magento Commerce repositories</h3>

<ul>
  <li><code class="highlighter-rouge">\Magento\Signifyd\Api\CaseRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Api\CommentRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Api\RmaManagementInterface::search</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Api\RmaRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Api\TrackRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\GiftWrapping\Api\WrappingRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\GiftCardAccount\Api\GiftCardAccountRepositoryInterface::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Signifyd\Model\CaseRepository::getList</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Model\Service\RmaManagement::search</code></li>
  <li><code class="highlighter-rouge">\Magento\GiftWrapping\Model\WrappingRepository::getList</code></li>
</ul>

<h2 id="compiler-changes">Compiler changes</h2>

<p>This release removes the multi-tenant compiler option and support of the definitions option for the single tenant compiler in the <code class="highlighter-rouge">env.php</code> file.</p>

<p>The following classes are no longer available:</p>

<ul>
  <li><code class="highlighter-rouge">Magento\Setup\Console\Command\DiCompileMultiTenantCommand</code></li>
  <li><code class="highlighter-rouge">Magento\Framework\ObjectManager\Relations\Compiled</code></li>
  <li><code class="highlighter-rouge">Magento\Framework\ObjectManager\Definition\Compiled\Serialized</code></li>
  <li><code class="highlighter-rouge">Magento\Framework\ObjectManager\Definition\Compiled\Binary</code></li>
  <li><code class="highlighter-rouge">Magento\Framework\Interception\Definition\Compiled</code></li>
</ul>

<p>The <code class="highlighter-rouge">bin/magento setup:config:set</code> command no longer has the <code class="highlighter-rouge">--definition-format</code> option.</p>

<h2 id="changes-in-ui">Changes in UI</h2>

<h3 id="advanced-section-in-system-configurations">Advanced section in System Configurations</h3>

<p><strong>Action:</strong> Section <code class="highlighter-rouge">Advanced</code> was removed from <span term-uuid="29ddb393-ca22-4df9-a8d4-0024d75739b1" class="glossary-term" data-toggle="popover">Admin</span> Interface<br />
<strong>Description:</strong> Magento does not support disabling/enabling modules output from the Admin Panel in 2.2.0 version. Module output can still be enabled/disabled in configuration files.</p>

<h2 id="database-schema-changes">Database schema changes</h2>

<h3 id="store_group">store_group</h3>

<p><strong>Action:</strong> New column <code class="highlighter-rouge">code</code> was added to <code class="highlighter-rouge">store_group</code> table. This column has a unique key.<br />
<strong>Description:</strong> Data to this column for existing store Groups will be automatically filled based on Group names.</p>

<h2 id="database-data-format-changes">Database data format changes</h2>

<p>This release replaces usages of <code class="highlighter-rouge">unserialize</code> with <a href="/guides/v2.2/extension-dev-guide/framework/serializer.html"><code class="highlighter-rouge">json_decode</code></a>.</p>

<p>The release also provides upgrade scripts that convert Magento data stored in serialized format.</p>

<p><span term-uuid="55774db9-bf9d-40f3-83db-b10cc5ae3b68" class="glossary-term" data-toggle="popover">Extension</span> developers should review the following cases to see what actions they should take for their extensions:</p>

<p><strong>Case 1:</strong><br />
Your extension declared fields for automatic serialization/unserialization using the <code class="highlighter-rouge">_serializableFields</code> parameter of <code class="highlighter-rouge">\Magento\Framework\Model\ResourceModel\Db\AbstractDb</code>.<br />
<strong>Solution:</strong><br />
Write an <a href="/guides/v2.2/ext-best-practices/tutorials/serialized-to-json-data-upgrade.html">upgrade script</a> to convert your extension data to JSON format.</p>

<p><strong>Case 2:</strong><br />
Your extension stores or adds serialized data to Magento entities (e.g. new/custom attributes for Product).<br />
<strong>Solution:</strong><br />
Your extension will continue working normally, but we recommend switching to JSON for security reasons.
You also need to write an upgrade script for the data in the database.</p>

<p><strong>Case 3:</strong><br />
Your extension relies on serialized data from Magento entities.<br />
<strong>Solution:</strong><br />
Update all usages to expect the data in JSON format.</p>

<p><strong>Case 4:</strong><br />
The serialize/unserialize logic belongs to your extension and stores data in a new table or field.<br />
<strong>Solution:</strong><br />
Your extension will continue working normally, but we recommend switching to JSON for security reasons.
You also need to write an upgrade script for the data in the database.</p>

<p><strong>Case 5:</strong><br />
Your extension accesses values in the <code class="highlighter-rouge">core_config_data</code> table using the following paths:</p>

<ul>
  <li><code class="highlighter-rouge">payment/braintree/countrycreditcard</code></li>
  <li><code class="highlighter-rouge">design/theme/ua_regexp</code></li>
  <li><code class="highlighter-rouge">cataloginventory/item_options/min_sale_qty</code></li>
  <li><code class="highlighter-rouge">currency/options/customsymbol</code></li>
  <li><code class="highlighter-rouge">admin/magento_logging/actions</code></li>
</ul>

<p><strong>Solution:</strong><br />
Update your extension to use <code class="highlighter-rouge">\Magento\Framework\Serialize\Serializer\Json</code> for serializing/unserializing data instead of the native <span term-uuid="bf703ab1-ca4b-48f9-b2b7-16a81fd46e02" class="glossary-term" data-toggle="popover">PHP</span> serialize/unserialize functions.</p>

<p><strong>Case 6:</strong><br />
Your extension uses a backend model that extends <code class="highlighter-rouge">\Magento\Config\Model\Config\Backend\Serialized</code> to save/load data to/from the database.</p>

<p><strong>Solution:</strong><br />
Write an <a href="/guides/v2.2/ext-best-practices/tutorials/serialized-to-json-data-upgrade.html">upgrade script</a> to update data stored by the extension in the <code class="highlighter-rouge">core_config_data</code> table from serialized to JSON format.</p>

<p><strong>See:</strong></p>

<ul>
  <li><a href="/guides/v2.2/ext-best-practices/tutorials/serialized-to-json-data-upgrade.html">Serialize to JSON data upgrade</a></li>
  <li><a href="/guides/v2.2/extension-dev-guide/framework/serializer.html">Serialize Library</a></li>
</ul>

<h2 id="database-field-changes">Database field changes</h2>

<p>This is a list of tables and fields where the data format changed from serialized to JSON format.</p>

<div class="collapsible"><b class="collapsible-title">Show table </b><div class="collapsible-content"><table>
  <thead>
    <tr>
      <th>Resource Model</th>
      <th>Table</th>
      <th>Field</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>\Magento\Quote\Model\ResourceModel\Quote\Payment</td>
      <td>quote_payment</td>
      <td>additional_information</td>
    </tr>
    <tr>
      <td>\Magento\Reward\Model\ResourceModel\Reward\History</td>
      <td>magento_reward_history</td>
      <td>additional_data</td>
    </tr>
    <tr>
      <td>\Magento\Sales\Model\ResourceModel\Order\Item</td>
      <td>sales_order_item</td>
      <td>product_options</td>
    </tr>
    <tr>
      <td>\Magento\Sales\Model\ResourceModel\Order\Payment</td>
      <td>sales_order_payment</td>
      <td>additional_information</td>
    </tr>
    <tr>
      <td>\Magento\Sales\Model\ResourceModel\Order\Shipment</td>
      <td>sales_shipment</td>
      <td>packages</td>
    </tr>
    <tr>
      <td>\Magento\Sales\Model\ResourceModel\Order\Payment\Transaction</td>
      <td>sales_payment_transaction</td>
      <td>additional_information</td>
    </tr>
    <tr>
      <td>\Magento\Quote\Model\Quote\Item\Option</td>
      <td>quote_item_option</td>
      <td>value</td>
    </tr>
    <tr>
      <td>\Magento\GiftRegistry\Model\Item\Option</td>
      <td>magento_giftregistry_item_option</td>
      <td>value</td>
    </tr>
    <tr>
      <td>\Magento\Wishlist\Model\Item</td>
      <td>wishlist_item_option</td>
      <td>value</td>
    </tr>
    <tr>
      <td>\Magento\Sales\Model\ResourceModel\Order</td>
      <td>sales_order</td>
      <td>gift_cards</td>
    </tr>
    <tr>
      <td>\Magento\Quote\Model\ResourceModel\Quote</td>
      <td>quote</td>
      <td>gift_cards</td>
    </tr>
    <tr>
      <td>\Magento\Quote\Model\ResourceModel\Quote\Address</td>
      <td>quote_address</td>
      <td>applied_taxes, gift_cards</td>
    </tr>
    <tr>
      <td>\Magento\Quote\Model\Quote\Payment</td>
      <td>quote_payment</td>
      <td>additional_data</td>
    </tr>
    <tr>
      <td>\Magento\Customer\Model\Attribute</td>
      <td>customer_eav_attribute</td>
      <td>validate_rules</td>
    </tr>
    <tr>
      <td>\Magento\Rma\Model\Item\Attribute</td>
      <td>magento_rma_item_eav_attribute</td>
      <td>validate_rules</td>
    </tr>
    <tr>
      <td>\Magento\UrlRewrite\Model\UrlRewrite</td>
      <td>url_rewrite</td>
      <td>metadata</td>
    </tr>
    <tr>
      <td>\Magento\Framework\Flag\FlagResource</td>
      <td>flag</td>
      <td>flag_data</td>
    </tr>
    <tr>
      <td>\Magento\Config\Model\ResourceModel\Config</td>
      <td>core_config_data</td>
      <td>value</td>
    </tr>
    <tr>
      <td>\Magento\Widget\Model\ResourceModel\Widget\Instance</td>
      <td>widget_instance</td>
      <td>widget_parameters</td>
    </tr>
    <tr>
      <td>\Magento\Reminder\Model\Rule</td>
      <td>magento_reminder_rule</td>
      <td>conditions_serialized</td>
    </tr>
    <tr>
      <td>\Magento\TargetRule\Model\Rule</td>
      <td>magento_targetrule</td>
      <td>actions_serialized, conditions_serialized, action_select_bind</td>
    </tr>
    <tr>
      <td>\Magento\SalesRule\Model\Rule</td>
      <td>salesrule</td>
      <td>conditions_serialized, actions_serialized</td>
    </tr>
    <tr>
      <td>\Magento\CatalogRule\Model\Rule</td>
      <td>catalogrule</td>
      <td>conditions_serialized, actions_serialized</td>
    </tr>
    <tr>
      <td>\Magento\CustomerSegment\Model\Segment</td>
      <td>magento_customersegment_segment</td>
      <td>conditions_serialized</td>
    </tr>
    <tr>
      <td>\Magento\Sales\Model\Order\Creditmemo\Item</td>
      <td>sales_creditmemo_item</td>
      <td>tax_ratio</td>
    </tr>
    <tr>
      <td>\Magento\Sales\Model\Order\Invoice\Item</td>
      <td>sales_invoice_item</td>
      <td>tax_ratio</td>
    </tr>
    <tr>
      <td>\Magento\User\Model\User</td>
      <td>admin_user</td>
      <td>extra</td>
    </tr>
    <tr>
      <td>\Magento\Catalog\Model\ResourceModel\Eav\Attribute</td>
      <td>catalog_eav_attribute</td>
      <td>additional_data</td>
    </tr>
    <tr>
      <td>\Magento\Support\Model\ResourceModel\Report</td>
      <td>support_report</td>
      <td>report_data</td>
    </tr>
    <tr>
      <td>\Magento\Logging\Block\Adminhtml\Details</td>
      <td>magento_logging_event</td>
      <td>info</td>
    </tr>
    <tr>
      <td>\Magento\Logging\Block\Adminhtml\Details\Renderer\Diff</td>
      <td>magento_logging_event_changes</td>
      <td>original_data, result_data</td>
    </tr>
    <tr>
      <td>\Magento\Rma\Model\Item, \Magento\Rma\Model\Rma</td>
      <td>magento_rma_item_entity</td>
      <td>product_options</td>
    </tr>
    <tr>
      <td>\Magento\Rma\Model\Shipping, \Magento\Rma\Model\Shipping\LabelService</td>
      <td>magento_rma_shipping_label</td>
      <td>packages</td>
    </tr>
    <tr>
      <td>\Magento\GiftRegistry\Model\Person, \Magento\GiftRegistry\Model\ResourceModel\Person</td>
      <td>magento_giftregistry_person</td>
      <td>custom_values</td>
    </tr>
    <tr>
      <td>\Magento\GiftRegistry\Model\Entity, \Magento\GiftRegistry\Model\ResourceModel\Entity</td>
      <td>magento_giftregistry_entity</td>
      <td>custom_values, shipping_address</td>
    </tr>
    <tr>
      <td>\Magento\ScheduledImportExport\Model\Scheduled\Operation</td>
      <td>magento_scheduled_operations</td>
      <td>file_info, entity_attributes</td>
    </tr>
    <tr>
      <td>\Magento\Cms\Model\ResourceModel\Block</td>
      <td>cms_block</td>
      <td>content</td>
    </tr>
    <tr>
      <td>\Magento\Cms\Model\ResourceModel\Page</td>
      <td>cms_page</td>
      <td>content</td>
    </tr>
    <tr>
      <td>\Magento\Widget\Model\ResourceModel\Widget\Instance</td>
      <td>layout_update</td>
      <td>xml</td>
    </tr>
    <tr>
      <td>\Magento\Banner\Model\ResourceModel\Banner</td>
      <td>magento_banner_content</td>
      <td>banner_content</td>
    </tr>
    <tr>
      <td>\Magento\Cms\Model\ResourceModel\Page</td>
      <td>cms_page</td>
      <td>layout_update_xml</td>
    </tr>
    <tr>
      <td>\Magento\Catalog\Model\ResourceModel\Product</td>
      <td>catalog_product_entity_text</td>
      <td>value</td>
    </tr>
    <tr>
      <td>\Magento\Catalog\Model\ResourceModel\Category</td>
      <td>catalog_category_entity_text</td>
      <td>value</td>
    </tr>
  </tbody>
</table>
</div></div>

<h3 id="table-deprecations">Table deprecations</h3>

<p>The table for <code class="highlighter-rouge">\Magento\Widget\Model\ResourceModel\Widget</code> has been deprecated.</p>

<h3 id="new-class-fielddataconverter">New Class: <code class="highlighter-rouge">FieldDataConverter</code></h3>

<p>This class supports data <span term-uuid="38c73ce4-8f01-4f74-ab30-1134cec5664f" class="glossary-term" data-toggle="popover">conversion</span> from one format to another.
It can be used to upgrade data in upgrade scripts.</p>

<h4 id="features">Features</h4>

<ul>
  <li>Ability to process records in batches</li>
  <li>Can use the <code class="highlighter-rouge">where</code> condition</li>
  <li>Update multiple fields in a table at once</li>
  <li>Update records in multiple threads</li>
  <li>Convert nested serialized data</li>
  <li>Update duplicate records at once</li>
</ul>

<h2 id="inputoutput-format-of-methods">Input/Output format of methods</h2>

<p>The following methods now return JSON instead of a serialized string.</p>

<div class="collapsible"><b class="collapsible-title">Show methods </b><div class="collapsible-content"><ul>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product\Option\Type\File::prepareForCart()</code></li>
  <li><code class="highlighter-rouge">\Magento\CatalogInventory\Helper\Minsaleqty::serializeValue($value)</code>
    <ul>
      <li>Only if <code class="highlighter-rouge">$value</code> is array type</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\Widget\Helper\Conditions::encode($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Wishlist\Model\Item\Option::getValue</code></li>
  <li><code class="highlighter-rouge">\Magento\Wishlist\Model\Item\Option::getData('value',...)</code></li>
  <li><code class="highlighter-rouge">\Magento\Widget\Model\Widget\Instance::getData('widget_parameters')</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\Creditmemo\Item::getTaxRatio</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\Invoice\Item::getTaxRatio</code></li>
  <li><code class="highlighter-rouge">\Magento\Quote\Model\Quote\Address\Total::getAppliedTaxes()</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\ResourceModel\Eav\Attribute::getData('additional_data')</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\ResourceModel\Eav\Attribute::getAdditionalData()</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\Item::getProductOptions()</code>
    <ul>
      <li>Return value is an array, applicable only for “bundle_selection_attributes” key</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\Quote\Model\Quote\Item::getOptionByCode</code>
    <ul>
      <li><code class="highlighter-rouge">info_buyRequest</code> option</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\Rule\Model\AbstractModel::getConditionsSerialized()</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product-&gt;getCustomOption('attributes')-&gt;getValue()</code></li>
  <li><code class="highlighter-rouge">\Magento\CatalogInventory\Helper\Minsaleqty::makeStorableArrayFieldValue()</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product\Option\Type\File::prepareForCart()</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product\Configuration\Item\Option\OptionInterface::getValue()</code></li>
  <li><code class="highlighter-rouge">\Magento\Quote\Model\Quote\Item\Option::getValue()</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product\Configuration\Item\ItemInterface::getOptionByCode('bundle_selection_ids')-&gt;getValue()</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\Item::getProductOptions()['bundle_selection_ids']</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product::getCustomOption('bundle_selection_ids')</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Model\Shipping::getPackages()</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Model\Item::getProductOptions()</code></li>
  <li><code class="highlighter-rouge">\Magento\Logging\Model\Event\Changes::getResultData()</code></li>
  <li><code class="highlighter-rouge">\Magento\Logging\Model\Event::getInfo()</code></li>
  <li><code class="highlighter-rouge">\Magento\GiftCardAccount\Helper\Data::getCards()</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\Data\OrderInterface</code>
    <ul>
      <li>[‘extension_attributes’ =&gt; ‘gift_cards’ =&gt; JSON]</li>
    </ul>
  </li>
</ul>
</div></div>

<p>The following methods now require JSON as a parameter instead of a serialized string.</p>

<div class="collapsible"><b class="collapsible-title">Show methods </b><div class="collapsible-content"><ul>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product\Option\Type\File::getFormattedOptionValue($optionValue)</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product\Option\Type\File::_unserializeValue($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product\Option\Type\File::getEditableOptionValue($optionValue)</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product\Option\Type\File::prepareOptionValueForRequest($optionValue)</code></li>
  <li><code class="highlighter-rouge">\Magento\CatalogInventory\Helper\Minsaleqty::unserializeValue($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Widget\Helper\Conditions::decode($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Wishlist\Model\Item\Option::setValue($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Wishlist\Model\Item\Option::setData('value', $value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Widget\Model\Widget\Instance::setData('widget_parameters', $value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\Creditmemo\Item::setTaxRatio($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\Invoice\Item::setTaxRatio($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Quote\Model\Quote\Address\Total::setAppliedTaxes($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Quote\Model\Quote\Address\Total::setFullInfo($value)</code>
    <ul>
      <li>Only for string values</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\ResourceModel\Eav\Attribute::setData('additional_data', $value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\ResourceModel\Eav\Attribute::setAdditionalData($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Model\Order\Item::setProductOptions($value)</code>
    <ul>
      <li><code class="highlighter-rouge">$value</code> is an array, applicable only for <code class="highlighter-rouge">bundle_selection_attributes</code> key</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\Quote\Model\Quote\Item::setOptionByCode</code>
    <ul>
      <li><code class="highlighter-rouge">info_buyRequest</code> option</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\Rule\Model\AbstractModel::setConditionsSerialized($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product::addCustomOption('attributes', $value)</code>
    <ul>
      <li>For attributes <code class="highlighter-rouge">bundle_selection_ids</code> key</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\UrlRewrite\Model\UrlRewrite::setMetadata($value)</code>
    <ul>
      <li>For non array values</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\UrlRewrite\Service\V1\Data::setMetadata($value)</code>
    <ul>
      <li>For non array values</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\UrlRewrite\Model\UrlPersistInterface::deleteByData()</code>
    <ul>
      <li>For metadata key</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">\Magento\Catalog\Model\Product\Configuration\Item\Option\OptionInterface::setValue($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Quote\Model\Quote\Item\Option::setValue($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Model\Shipping::setPackages($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Rma\Model\Item::setProductOptions($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Logging\Model\Event\Changes::setResultData($value)</code></li>
  <li><code class="highlighter-rouge">\Magento\Sales\Api\Data\OrderInterface</code>
    <ul>
      <li>[‘extension_attributes’ =&gt; ‘gift_cards’ =&gt; JSON]</li>
    </ul>
  </li>
</ul>
</div></div>

<h3 id="other-class-changes">Other class changes</h3>

<table>
  <thead>
    <tr>
      <th>Class</th>
      <th>Change</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">Magento\Framework\Acl\Cache</code></td>
      <td>Class removed</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Magento\Framework\Acl\Builder::__construct</code></td>
      <td>[public] Method parameter changed</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Magento\Framework\Acl\Builder::$_cache</code></td>
      <td>[protected] Property removed</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Magento\User\Model\ResourceModel\User::__construct</code></td>
      <td>[public] Method parameter changed</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Magento\User\Model\ResourceModel\User::$_aclCache</code></td>
      <td>[protected] Property removed</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Magento\Authorization\Model\ResourceModel\Rules::__construct</code></td>
      <td>[public] Method parameter changed</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Magento\Authorization\Model\ResourceModel\Rules::$_aclCache</code></td>
      <td>[protected] Property removed</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">Magento\Setup\Module\Di\Compiler\Config\Writer\Filesystem</code></td>
      <td>Format and type of <code class="highlighter-rouge">generated\metadata</code> files changed from <code class="highlighter-rouge">.ser</code> to <code class="highlighter-rouge">.php</code> and serialized data to php data</td>
    </tr>
  </tbody>
</table>

<h2 id="changes-in-file-system">Changes in file system</h2>

<h3 id="file-appetcconfiglocalphp-is-not-supported">File <code class="highlighter-rouge">app/etc/config.local.php</code> is not supported</h3>

<p><strong>Description:</strong> file app/etc/config.local.php is not read anymore.
 CLI command <code class="highlighter-rouge">app:config:dump</code> writes data to <code class="highlighter-rouge">app/etc/config.php</code> instead. File <code class="highlighter-rouge">app/etc/config.local.php</code> may be removed manually.</p>

<h3 id="directories-vardi-and-vargenerate-are-moved">Directories <code class="highlighter-rouge">var/di</code> and <code class="highlighter-rouge">var/generate</code> are moved</h3>

<p><strong>Description:</strong></p>

<ul>
  <li><code class="highlighter-rouge">var/di</code> is moved to <code class="highlighter-rouge">generated/metadata</code></li>
  <li><code class="highlighter-rouge">var/generate</code> is moved to <code class="highlighter-rouge">generated/code</code></li>
</ul>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.2/release-notes/backward-incompatible-changes/index.md" target="_blank">
        Edit this page on GitHub
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.2/release-notes/backward-incompatible-changes/" target="_blank">Give us feedback</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.2/contributor-guide/contributing_docs.html">Become a Contributor</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
  <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
  <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
  <li><a href="/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>
  <li><a href="/magento-third-party.html">Third-Party Licenses</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>



<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>




</body>
</html>
