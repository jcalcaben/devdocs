<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Technical guidelines | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>



<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>

<!-- Hotjar Tracking Code for http://devdocs.magento.com/ -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:806243,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<!-- heap analytics -->
<script type="text/javascript">
      window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
      heap.load("2619540280");
</script>




	<link rel="canonical" href="/guides/v2.0/coding-standards/technical-guidelines.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.0/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.0">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.0
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/coding-standards/technical-guidelines.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/coding-standards/technical-guidelines.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/coding-standards/technical-guidelines.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/coding-standards/technical-guidelines.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.0/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
          
          <li><a href="/guides/v2.0/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          
          <li><a href="/guides/v2.0/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li><a href="/guides/v2.0/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a></li>
          <li><a href="/magento-release-information.html">Release Information</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">Backend</div>
        <ul>
          <li><a href="/guides/v2.0/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li><a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.0/mrg/intro.html">Module Reference Guide</a></li>
          <li><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          <li><a href="/guides/v2.0/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Frontend</div>
        <ul>
          <li class=""><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li><a href="/guides/v2.0/ui-components/ui-component.html">UI Components</a></li>
          
          <li><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li><a href="/guides/v2.0/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li><a href="/guides/v2.0/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.0/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li><a href="/guides/v2.0/rest/bk-rest.html">REST API Reference</a></li>
          <li><a href="/guides/v2.0/soap/bk-soap.html">SOAP API Reference</a></li>
          
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/test/testing.html">Magento Testing Guide</a></li>
        
        <li><a href="/guides/v2.0/mtf/mtf_introduction.html">Functional Testing</a></li>
        <li><a href="/guides/v2.0/test/integration/integration_test_execution.html">Integration Testing</a></li>
        <li><a href="/guides/v2.0/test/js/jasmine.html">JavaScript Unit Testing</a></li>
        <li><a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
        <li><a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
        
        <li><a href="/guides/v2.0/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">Payment Integrations</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/howdoi/bk-how-do-i.html">How To</a></li>
        

        <li><a href="/videos/">Video Tutorials</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.0/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

    

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">Coding Standards</h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="coding-standards">
    

    
    <a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="code-demarcation-standard">

            

            
            <a href="/guides/v2.0/coding-standards/code-standard-demarcation.html">Code demarcation standard</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="php-coding-standard">

            

            
            <a href="/guides/v2.0/coding-standards/code-standard-php.html">PHP coding standard</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="php-code-sniffers">

            

            
            <a href="/guides/v2.0/coding-standards/code-standard-sniffers.html">PHP code sniffers</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="docblock-standard">

            

            
            <a href="/guides/v2.0/coding-standards/docblock-standard-general.html">DocBlock standard</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="javascript-coding-standard">

            

            
            <a href="/guides/v2.0/coding-standards/code-standard-javascript.html">JavaScript coding standard</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="javascript-docblock-standard">

            

            
            <a href="/guides/v2.0/coding-standards/docblock-standard-javascript.html">JavaScript DocBlock standard</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="jquery-widget-coding-standard">

            

            
            <a href="/guides/v2.0/coding-standards/code-standard-jquery-widgets.html">jQuery widget coding standard</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="less-coding-standard">

            

            
            <a href="/guides/v2.0/coding-standards/code-standard-less.html">LESS coding standard</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="html-style-guide">

            

            
            <a href="/guides/v2.0/coding-standards/code-standard-html.html">HTML style guide</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1 active " id="technical-guidelines">
    

    
    <a href="/guides/v2.0/coding-standards/technical-guidelines.html">Technical guidelines</a>
    

    
</li>


		    
		    	

<li class="nav-level1  " id="technical-vision">
    

    
    <span>Technical vision</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="web-api">

            

            
            <a href="/guides/v2.0/coding-standards/technical-vision/webapi.html">Web Api</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.0/"><span>Home</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.0/coding-standards/bk-coding-standards.html">
            <span property="name">Coding Standards</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Technical guidelines</span>

        

        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">Technical guidelines</h1>

  


</section>

			<h2 id="about-this-document">About this document</h2>

<h3 id="overview">Overview</h3>

<p>This document lists the fundamental coding and application design principles that guide Magento 2 developer team members.</p>

<p>Magento core developers use this document as a reference during code reviews; some rules have corresponding code checks in the Magento static tests.</p>

<p>These guidelines came from many years of hard work, experience, and discussions. We strongly believe that new technical initiatives should follow these recommendations, and the existing code should be improved to meet them.</p>

<h3 id="text-conventions">Text conventions</h3>

<p>Use <a href="https://tools.ietf.org/html/rfc2119">RFC2119</a> to interpret keywords like:</p>

<ul>
  <li>
    <p>MUST and MUST NOT</p>
  </li>
  <li>
    <p>REQUIRED</p>
  </li>
  <li>
    <p>SHALL and SHALL NOT</p>
  </li>
  <li>
    <p>SHOULD and SHOULD NOT</p>
  </li>
  <li>
    <p>RECOMMENDED</p>
  </li>
  <li>
    <p>MAY</p>
  </li>
  <li>
    <p>OPTIONAL</p>
  </li>
</ul>

<h2 id="1-basic-programming-principles">1. Basic programming principles</h2>

<p>1.1. Function arguments SHOULD NOT be modified.</p>

<h2 id="2-class-design">2. Class design</h2>

<p>2.1. Object decomposition MUST follow the <a href="https://en.wikipedia.org/wiki/SOLID_(object-oriented_design)">SOLID principles</a>.</p>

<p>2.2. Object MUST be ready for use after instantiation. No additional public initialization methods are allowed.</p>

<div class="collapsible"><b class="collapsible-title">Examples: </b><div class="collapsible-content"><table>
    <tr>
        <th><span style="color: red">Not recommended</span></th>
        <th><span style="color: green">Recommended</span></th>
    </tr>
    <tr>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Config</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$data</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">init</span><span class="p">()</span> <span class="c1">// or load()
</span>    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fileReader</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="s1">'cache.xml'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getValue</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        </td>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Config</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$data</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getValue</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fileReader</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="s1">'cache.xml'</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        </td>
    </tr>
</table>
</div></div>
<hr />

<p start="2.3">2.3. Class constructor can have only dependency assignment operations and/or argument validation operations. No other operations are allowed.</p>

<p>2.3.1. Constructor SHOULD throw an exception when validation of an argument has failed.</p>

<div class="collapsible"><b class="collapsible-title">Example: </b><div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Composite</span>
<span class="p">{</span>
    <span class="sd">/**
     * @var RendererInterface[]
     */</span>
    <span class="k">private</span> <span class="nv">$renderers</span><span class="p">;</span>

    <span class="sd">/**
     * @param RendererInterface[] $renderers
     * @throws InvalidArgumentException
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="k">array</span> <span class="nv">$renderers</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$renderers</span> <span class="k">as</span> <span class="nv">$renderer</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$renderer</span> <span class="nx">instanceof</span> <span class="nx">RendererInterface</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nx">InvalidArgumentException</span><span class="p">(</span>
                    <span class="nb">sprintf</span><span class="p">(</span><span class="s1">'Instance of the phrase renderer is expected, got %s instead.'</span><span class="p">,</span> <span class="nb">get_class</span><span class="p">(</span><span class="nv">$renderer</span><span class="p">))</span>
                <span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renderers</span> <span class="o">=</span> <span class="nv">$renderers</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
</div></div>
<hr />

<p start="3.2">2.3.2. Events MUST NOT be triggered in constructors.</p>

<div class="collapsible"><b class="collapsible-title">Examples: </b><div class="collapsible-content"><table>
    <tr>
        <th><span style="color: red">Not recommended</span></th>
        <th><span style="color: green">Recommended</span></th>
    </tr>
    <tr>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Config</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$data</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$fileReader</span><span class="p">,</span> <span class="nv">$eventManager</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">=</span> <span class="nv">$fileReader</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">(</span><span class="s1">'cache.xml'</span><span class="p">);</span>
        <span class="nv">$eventManager</span><span class="o">-&gt;</span><span class="na">dispatch</span><span class="p">(</span><span class="s1">'config_read_after'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        </td>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Config</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$fileReader</span><span class="p">;</span>

    <span class="k">private</span> <span class="nv">$eventManager</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nv">$fileReader</span><span class="p">,</span> <span class="nv">$eventManager</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">eventManager</span> <span class="o">=</span> <span class="nv">$eventManager</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fileReader</span> <span class="o">=</span> <span class="nv">$fileReader</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">getData</span><span class="p">(</span><span class="nv">$key</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">fileReader</span><span class="o">-&gt;</span><span class="na">read</span><span class="p">(</span><span class="s1">'cache.xml'</span><span class="p">);</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">eventManager</span><span class="o">-&gt;</span><span class="na">dispatch</span><span class="p">(</span><span class="s1">'config_read_after'</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="nv">$key</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        </td>
    </tr>
</table>
</div></div>

<hr />

<p start="2.4">2.4. All dependencies MUST be requested by the most generic type that is required by the client object.</p>

<div class="collapsible"><b class="collapsible-title">Examples: </b><div class="collapsible-content"><table>
    <tr>
        <th><span style="color: red">Not recommended</span></th>
        <th><span style="color: green">Recommended</span></th>
    </tr>
    <tr>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">interface</span> <span class="nx">SessionAdapterInterface</span>
<span class="p">{}</span>

<span class="nx">RedisSessionAdapter</span> <span class="k">implements</span> <span class="nx">SessionAdapterInterface</span>
<span class="p">{}</span>

<span class="k">class</span> <span class="nc">SessionManager</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">RedisSessionAdapter</span> <span class="nv">$sessionAdapter</span><span class="p">)</span>
    <span class="p">{}</span>
<span class="p">}</span>

<span class="o">//</span> <span class="nx">Breaks</span> <span class="nx">polymorphism</span> <span class="nx">principle</span><span class="p">,</span> <span class="nx">restricts</span> <span class="nx">what</span> <span class="nx">types</span> <span class="nx">can</span> <span class="nx">be</span> <span class="nx">passed</span> <span class="nx">at</span> <span class="nx">the</span> <span class="nx">runtime</span><span class="o">.</span></code></pre></figure>

        </td>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">interface</span> <span class="nx">SessionAdapterInterface</span>
<span class="p">{}</span>

<span class="nx">RedisSessionAdapter</span> <span class="k">implements</span> <span class="nx">SessionAdapterInterface</span>
<span class="p">{}</span>

<span class="k">class</span> <span class="nc">SessionManager</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span><span class="nx">SessionAdapterInterface</span> <span class="nv">$sessionAdapter</span><span class="p">)</span>
    <span class="p">{}</span>
<span class="p">}</span></code></pre></figure>

        </td>
    </tr>
</table>
</div></div>

<hr />

<p>2.5. Proxies and interceptors MUST NEVER be explicitly requested in constructors.</p>

<p>2.6. Inheritance SHOULD NOT be used. Composition SHOULD be used for code reuse.</p>
<div class="collapsible"><b class="collapsible-title">Examples: </b><div class="collapsible-content"><table>
    <tr>
        <th><span style="color: red">Not recommended</span></th>
        <th><span style="color: green">Recommended</span></th>
    </tr>
    <tr>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">AbstractController</span> <span class="k">extends</span> <span class="nx">Action</span>
<span class="p">{</span>
    <span class="c1">// ...
</span>    <span class="k">protected</span> <span class="k">function</span> <span class="nf">validate</span><span class="p">(</span>
        <span class="nv">$request</span>
    <span class="p">)</span> <span class="p">{}</span>

    <span class="k">protected</span> <span class="k">function</span> <span class="nf">generateHash</span><span class="p">(</span>
        <span class="nv">$request</span>
    <span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Edit</span> <span class="k">extends</span> <span class="nx">AbstractController</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$errors</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span>
            <span class="nv">$request</span>
        <span class="p">);</span>

        <span class="c1">// ...
</span>
        <span class="nv">$hash</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">generateHash</span><span class="p">(</span>
            <span class="nv">$request</span>
        <span class="p">);</span>
        <span class="c1">// ...
</span>    <span class="p">}</span>
<span class="p">}</span>

<span class="o">//</span> <span class="nx">Smaller</span> <span class="nx">classes</span><span class="p">,</span> <span class="nx">one</span> <span class="nx">responsibility</span><span class="p">,</span> <span class="nx">more</span> <span class="nx">flexible</span><span class="p">,</span> <span class="nx">easy</span> <span class="nx">to</span> <span class="nx">understand</span><span class="p">,</span> <span class="nx">more</span> <span class="nx">testable</span><span class="o">.</span></code></pre></figure>

        </td>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Edit</span> <span class="k">extends</span> <span class="nx">Action</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__constructor</span><span class="p">(</span>
        <span class="nx">ValidatorInterface</span> <span class="nv">$validator</span><span class="p">,</span>
        <span class="nx">HashGeneratorInterface</span> <span class="nv">$hashGenerator</span>
    <span class="p">)</span> <span class="p">{}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$errors</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">validator</span><span class="o">-&gt;</span><span class="na">validate</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
        <span class="c1">// ...
</span>        <span class="nv">$hash</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hashGenerator</span><span class="o">-&gt;</span><span class="na">generateHash</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        </td>
    </tr>
</table>
</div></div>

<hr />

<p>2.7. All non-public properties and methods SHOULD be private.</p>

<p>2.8. Abstract classes MUST NOT be marked as public <code class="highlighter-rouge">@api</code>.</p>

<p>2.9. Service classes (ones that provide behavior but not data, like <code class="highlighter-rouge">EventManager</code>) SHOULD NOT have a mutable state.</p>

<p>2.10. Only data objects or entities (Product, Category, etc.) MAY have any observable state.</p>

<p>2.11. “Setters” SHOULD NOT be used. They are only allowed in Data Transfer Objects.</p>

<p>2.12. “Getters” SHOULD NOT change the state of an object.</p>

<p>2.13. Static methods SHOULD NOT be used.</p>

<p>2.14. <a href="http://blog.ploeh.dk/2011/05/24/DesignSmellTemporalCoupling/">Temporal coupling</a> MUST be avoided.</p>
<div class="collapsible"><b class="collapsible-title">Example #1: </b><div class="collapsible-content"><table>
    <tr>
        <th><span style="color: red">Not recommended</span></th>
        <th><span style="color: green">Recommended</span></th>
    </tr>
    <tr>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$url</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Url</span><span class="p">();</span>
<span class="nv">$url</span><span class="o">-&gt;</span><span class="na">setBaseUrl</span><span class="p">(</span><span class="nv">$baseUrl</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$url</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'custom/path'</span><span class="p">);</span> <span class="c1">// prints full URL
</span>
<span class="c1">// Developer forgot or didn’t know that you need to call setBaseUrl
</span><span class="nv">$url</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Url</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$url</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'custom/path'</span><span class="p">);</span> <span class="c1">// Throws exception, which makes issue smaller. If it doesn't throw and exception, it could lead to a hidden bug more likely.
</span>
<span class="o">//</span> <span class="nx">Method</span> <span class="nx">with</span> <span class="nx">out</span> <span class="nx">parameters</span> <span class="nx">that</span> <span class="nx">doesn</span><span class="err">’</span><span class="nx">t</span> <span class="k">return</span> <span class="nx">anything</span> <span class="nx">could</span> <span class="nx">be</span> <span class="nx">sign</span> <span class="nx">of</span> <span class="nx">temporal</span> <span class="nx">coupling</span><span class="o">.</span></code></pre></figure>

        </td>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="nv">$url</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Url</span><span class="p">(</span><span class="nv">$baseUrl</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$url</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'custom/path'</span><span class="p">);</span>

<span class="c1">// Or
</span><span class="nv">$url</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Url</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$url</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$baseUrl</span><span class="p">,</span> <span class="s1">'custom/path'</span><span class="p">);</span>

<span class="o">//</span> <span class="nx">Only</span> <span class="nx">one</span> <span class="nx">way</span> <span class="nx">to</span> <span class="k">use</span> <span class="nx">API</span><span class="p">,</span> <span class="nx">no</span> <span class="nx">temporal</span> <span class="nx">coupling</span><span class="o">.</span></code></pre></figure>

        </td>
    </tr>
</table>
</div></div>

<hr />

<div class="collapsible"><b class="collapsible-title">Example #2: </b><div class="collapsible-content"><table>
    <tr>
        <th><span style="color: red">Not recommended</span></th>
        <th><span style="color: green">Recommended</span></th>
    </tr>
    <tr>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Edit</span> <span class="k">extends</span> <span class="nx">Action</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...
</span>        <span class="nv">$product</span> <span class="o">=</span> <span class="nv">$productResource</span><span class="o">-&gt;</span><span class="na">load</span><span class="p">(</span><span class="nv">$product</span><span class="p">,</span> <span class="nv">$productSku</span><span class="p">,</span> <span class="s1">'sku'</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">registry</span><span class="o">-&gt;</span><span class="na">register</span><span class="p">(</span><span class="s1">'product'</span><span class="p">,</span> <span class="nv">$product</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">View</span> <span class="k">extends</span> <span class="nx">Template</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getProductName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$product</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">registry</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'product'</span><span class="p">);</span>
        <span class="k">return</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

        </td>
        <td>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">class</span> <span class="nc">Edit</span> <span class="k">extends</span> <span class="nx">Action</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...
</span>        <span class="nv">$product</span> <span class="o">=</span> <span class="nv">$productRepository</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$productSku</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">View</span> <span class="k">extends</span> <span class="nx">Template</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getProductName</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// ...
</span>        <span class="nv">$product</span> <span class="o">=</span> <span class="nv">$productRepository</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$productSku</span><span class="p">);</span>
        <span class="k">return</span> <span class="nv">$product</span><span class="o">-&gt;</span><span class="na">getName</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="o">//</span> <span class="nx">More</span> <span class="nx">flexible</span><span class="p">,</span> <span class="nx">no</span> <span class="nx">dependencies</span> <span class="nx">between</span> <span class="nx">classes</span><span class="p">,</span> <span class="nx">no</span> <span class="nx">temporal</span> <span class="nx">coupling</span><span class="o">.</span></code></pre></figure>
</td></tr></table>
</div></div>

<hr />

<p>2.15. Method chaining in class design MUST be avoided.</p>

<p>2.16. <a href="https://en.wikipedia.org/wiki/Law_of_Demeter">Law of Demeter</a> SHOULD be obeyed.</p>

<p>2.17. Patterns</p>

<p>2.17.1. Proxies SHOULD be used for lazy-loading optional dependencies.</p>

<p>2.17.2. Composites SHOULD be used when there is a need to work with a tree as a single object.</p>

<div class="collapsible"><b class="collapsible-title">Example: </b><div class="collapsible-content"><p>You need to read configuration from different sources (like database or filesystem) and want to make the reading process configurable: allow extensions to add more configuration sources. In this case, you can create a <code class="highlighter-rouge">ConfigReaderInterface</code> with a composite implementation - <code class="highlighter-rouge">ConfigReaderComposite</code>, and configure particular readers as children of a composite reader.</p>
</div></div>
<hr />
<p>2.17.3. Strategy SHOULD be used when there are multiple algorithms for performing an operation.</p>

<h2 id="3-dependency-injection">3. Dependency injection</h2>

<p>3.1. There SHOULD be no circular dependencies between objects.</p>

<p>3.2. The <code class="highlighter-rouge">app/etc/di.xml</code> file MUST contain only framework-level <span term-uuid="2be50595-c5c7-4b9d-911c-3bf2cd3f7beb" class="glossary-term" data-toggle="popover">Dependency Injection</span> (DI) settings.</p>

<p>3.3. All modular DI settings (except for Presentation layer configuration) SHOULD be stored in <code class="highlighter-rouge">&lt;module_dir&gt;/etc/di.xml</code>.</p>

<p>3.4. All modular Presentation layer DI settings SHOULD be stored in <code class="highlighter-rouge">&lt;module_dir&gt;/etc/&lt;area_code&gt;/di.xml</code>.</p>

<h2 id="4-interception">4. Interception</h2>

<p>4.1. Around-plugins SHOULD only be used when behavior of an original method is supposed to be substituted in certain scenarios.</p>

<p>4.2. Plugins SHOULD NOT be used within own <span term-uuid="c1e4242b-1f1a-44c3-9d72-1d5b1435e142" class="glossary-term" data-toggle="popover">module</span>.</p>

<p>4.3. Plugins SHOULD NOT be added to data objects.</p>

<p>4.4. Plugins MUST be stateless.</p>

<h2 id="5-exceptions">5. Exceptions</h2>

<p>5.1. All exceptions that are surfaced to the end user MUST produce error messages in the following format:</p>

<ul>
  <li>
    <p>Symptom</p>
  </li>
  <li>
    <p>Details</p>
  </li>
  <li>
    <p>Solution or workaround</p>
  </li>
</ul>

<p start="5.2">5.2. Exceptions MUST NOT be handled in the same function where they are thrown.</p>

<p>5.3. If a function A calls function B, and function B might throw an exception, this <span term-uuid="53da11f1-d0b8-4a7e-b078-1e099462b409" class="glossary-term" data-toggle="popover">exception</span> MUST be either processed by function A or declared by the @throws annotation in the documentation block of function A.</p>

<p>5.4. Exceptions MUST NOT handle message output. It is the processing code that decides how to process an exception.</p>

<p>5.5. Business logic (both application and domain) MUST NOT be managed with exceptions. Conditional statements SHOULD be used instead.</p>

<p>5.6. The short name of an exception class MUST be clear, meaningful, and state the cause of exception.</p>

<p>5.7. Thrown exceptions SHOULD be as specific as possible. The top generic <code class="highlighter-rouge">\Exception</code> SHOULD NOT be thrown anywhere.</p>

<p>5.8. All direct communications with third-party libraries MUST be wrapped with a try/catch statement.</p>

<p>5.9. <code class="highlighter-rouge">\Exception</code> SHOULD be caught only in the code that calls third-party libraries, in addition to catching specific exceptions thrown by the <span term-uuid="08968dbb-2eeb-45c7-ae95-ffca228a7575" class="glossary-term" data-toggle="popover">library</span>.</p>

<p>5.10. <code class="highlighter-rouge">\Exception</code> SHOULD NOT be thrown in Front Controller and Action Controllers.</p>

<p>5.11. A separate exceptions hierarchy SHOULD be defined on each application layer. It is allowed to throw exceptions that are only defined on the same layer.</p>

<p>5.12. If an exception is caught on the application layer that differs from the one where it has been thrown, and it SHOULD be re-thrown, you SHOULD create a new exception instance that is appropriate for the current layer. In this case, the original exception must be passed to a new instance with the “previous” argument.</p>

<p>5.13. It is not allowed to absorb exceptions with no logging or/and any workaround operation executed.</p>

<p>5.14. Any exception SHOULD be logged only in the <code class="highlighter-rouge">catch</code> block where it is processed, and SHOULD NOT be re-thrown.</p>

<p>5.15. Exceptions SHOULD NOT be caught in a loop. The loop SHOULD be wrapped with a <code class="highlighter-rouge">try/catch</code> construct instead.</p>

<p>5.16. If a method uses system resources (such as files, sockets, streams, etc.), the code MUST be wrapped with a <code class="highlighter-rouge">try</code> block and the corresponding <code class="highlighter-rouge">finally</code> block. In the <code class="highlighter-rouge">finally</code> sections, all resources SHOULD be properly released.</p>

<p>5.17. <code class="highlighter-rouge">LocalizedException</code> SHOULD only be thrown in the Presentation layer (Controllers, Blocks).</p>

<h2 id="6-application-layers">6. Application layers</h2>

<h3 id="61-all-layers">6.1. All layers</h3>

<p>6.1.1. Application SHOULD be structured in compliance with the <a href="https://martinfowler.com/bliki/CQRS.html">CQRS principle</a>.</p>

<p>6.1.2. Every application layer (Presentation, Service Contracts, Data Access) MUST process (handle or re-throw) exceptions of the underlying layer.</p>

<h3 id="62-presentation-layer">6.2. Presentation layer</h3>

<p>6.2.1. According to CQRS, the Presentation layer hosts the Command and the Query Infrastructures:</p>

<ul>
  <li>
    <p><strong>Command</strong> for Actions</p>
  </li>
  <li>
    <p><strong>Query</strong> for <span term-uuid="73ab5daa-5857-4039-97df-11269b626134" class="glossary-term" data-toggle="popover">Layout</span> and its elements (Blocks and UI Components)</p>
  </li>
</ul>

<p>6.2.2. Request, Response, Session, Store Manager and Cookie objects MUST be used only in the Presentation layer.</p>

<p>6.2.3. All actions MUST return the <code class="highlighter-rouge">ResultInterface</code> implementation.</p>

<p>6.2.4. Actions MUST NOT reference blocks declared in layout.</p>

<h3 id="63-data-access-persistence-layer">6.3. Data Access (Persistence) layer</h3>

<p>6.3.1. Entities MAY have fields scoped differently (in product, EAV — per store, options — per website).</p>

<p>6.3.2. Every persistence operation MUST be performed with one scope set.</p>

<p>6.3.3. Entities MUST NOT contain persistence-related logic.</p>

<p>6.3.4. MySQL’s <code class="highlighter-rouge">strict_mode</code> variable SHOULD be aligned with the default <code class="highlighter-rouge">strict_mode</code> of the latest MySQL release.</p>

<h3 id="64-service-contracts-application-layer">6.4. Service Contracts (Application) layer</h3>

<p>We are reviewing this section and will publish it soon.</p>

<h2 id="7-configuration">7. Configuration</h2>

<p>7.1. An Application Instance consists of:</p>

<ul>
  <li>
    <p>Code</p>
  </li>
  <li>
    <p>Environment Configuration</p>
  </li>
  <li>
    <p>Data</p>
  </li>
</ul>

<p>7.2. Code includes:</p>

<ul>
  <li>
    <p>application codebase</p>
  </li>
  <li>
    <p><span term-uuid="8c0645c5-aa6b-4a52-8266-5659a8b9d079" class="glossary-term" data-toggle="popover">XML</span> configuration</p>
  </li>
  <li>
    <p>generated code and <span term-uuid="363662cb-73f1-4347-a15e-2d2adabeb0c2" class="glossary-term" data-toggle="popover">static files</span></p>
  </li>
  <li>
    <p>database structure</p>
  </li>
  <li>
    <p>system configuration values</p>
  </li>
  <li>
    <p>configuration scopes (stores/store groups/websites)</p>
  </li>
  <li>
    <p><span term-uuid="f3944faf-127e-4097-9918-a2e9c647d44f" class="glossary-term" data-toggle="popover">CMS</span> entities</p>
  </li>
</ul>

<p>7.3. Environment Configuration includes information about application services connection.</p>

<p>7.4. Data includes the business <span term-uuid="a9027f5d-efab-4662-96aa-c2999b5ab259" class="glossary-term" data-toggle="popover">entity</span> data.</p>

<p>7.5. Code and Environment Configuration MUST not be stored in Data Storage.</p>

<p>7.6. Installation process MUST NOT modify Code.</p>

<p>7.7. All XML configuration formats MUST be declarative. Imperative nodes are not allowed.</p>

<p>7.8. All Configuration objects MUST use <code class="highlighter-rouge">Magento\Framework\Config</code>.</p>

<h2 id="8-modularity">8. Modularity</h2>

<p>8.1. The Application Framework (<code class="highlighter-rouge">Magento\Framework\*</code>) MUST NOT depend on application modules.</p>

<p>8.2. All dependencies MUST be declared in the component’s <code class="highlighter-rouge">composer.json</code> file.</p>

<p>8.3. If component A uses behavior of Component B, such Component B MUST be declared in the <code class="highlighter-rouge">require</code> section of Component A’s <code class="highlighter-rouge">composer.json</code> file, except for cases where Component B is used in the code that customizes the behavior of Component B.</p>

<p>8.4. If component A extends/customizes the behavior of component B through its customization points (layout handles, plugins, events, etc.), such Component B MUST be declared in the <code class="highlighter-rouge">suggest</code> section of Component A.</p>

<p>8.5. Only the <code class="highlighter-rouge">@api</code> code of any module can be referenced by other modules.</p>

<p>8.6. A module MUST NOT contain references to <span term-uuid="d2093e4a-2b71-48a3-99b7-b32af7158019" class="glossary-term" data-toggle="popover">theme</span> resources.</p>

<p>8.7. A component MUST NOT rely neither on dependencies of dependencies nor on dependencies of the project it is included in (e.g., Magento application). All component dependencies MUST be stated explicitly.</p>

<h2 id="9-browser-server-interaction-in-web-application">9. Browser-Server interaction in web application</h2>

<p>9.1. All Client-Server calls must follow the <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP Protocol</a>.</p>

<p>9.2. All customer-agnostic data (Products, Categories, CMS Pages) MUST be rendered on a server and cached in a public <span term-uuid="0bc9c8bc-de1a-4a06-9c99-a89a29c30645" class="glossary-term" data-toggle="popover">cache</span> server (Varnish).</p>

<p>9.3. All customer-specific data MUST be rendered on the browser side using a <span term-uuid="312b4baf-15f7-4968-944e-c814d53de218" class="glossary-term" data-toggle="popover">JavaScript</span> (JS) application.</p>

<p>9.4. <span term-uuid="a2aff425-07dd-4bd6-9671-29b7edefa871" class="glossary-term" data-toggle="popover">HTML</span> <span term-uuid="8f407f13-4350-449b-9dc5-217dcf01bc42" class="glossary-term" data-toggle="popover">markup</span> generated on server MUST NOT contain user-specific data.</p>

<p>9.5. HTML markup generated on server MUST NOT contain session-specific data (e.g. a form element with a CSRF token).</p>

<p>9.6. A JS application MAY receive customer-specific data using the CustomerData JS <span term-uuid="786086f2-622b-4007-97fe-2c19e5283035" class="glossary-term" data-toggle="popover">API</span>.</p>

<p>9.7. All state-modifying requests from a browser SHOULD be performed with AJAX requests.</p>

<p>9.8. If an error occurs during request handling, the server MUST return an appropriate <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">HTTP Status Code</a> and an explanation of an error in the response body.</p>

<p>9.9. All headers MUST be respected.</p>

<p>9.10. The Request, Session, and Cookie objects MUST NOT be injected in an object constructor. They MUST be passed only as method arguments.</p>

<p>9.11. Operation scopes MUST always be explicitly requested by operations (<code class="highlighter-rouge">StoreManager</code> SHOULD NOT be used to retrieve the store ID).</p>

<h2 id="10-javascript-js-application">10. JavaScript (JS) application</h2>

<p>10.1. The Magento 2 <span term-uuid="9bcc648c-bd08-4feb-906d-1e24c4f2f422" class="glossary-term" data-toggle="popover">UI Component</span> framework MUST be used to build front-end applications.</p>

<p>10.2. Only private content SHOULD be rendered in browser.</p>

<p>10.3. All module dependencies of a RequireJS module MUST be declared in the module’s definition header. No direct calls to <code class="highlighter-rouge">require</code> SHOULD be made unless the list of modules to be loaded is dynamic.</p>

<p>10.4. The <a href="https://w3c.github.io/webappsec-csp/">W3C Content Security Policy</a> MUST be followed.</p>

<p>10.5. ESLint <a href="https://github.com/magento/magento2/blob/2.1/dev/tests/static/testsuite/Magento/Test/Js/_files/eslint/.eslintrc-magento">rules</a> SHOULD BE followed.</p>

<p>10.5.1. ES5 SHOULD be used as a JS standard.</p>

<p>10.5.2. Language features (closures) MUST be used for scope management. There SHOULD be no <code class="highlighter-rouge">_</code> (underscore) naming convention for private properties.</p>

<p>10.5.3. All asynchronous operations MUST be represented with JQuery AJAX calls.</p>

<p>10.5.4. Global properties (window.*) MUST NOT be used. A module system SHOULD be used for shared objects.</p>

<p>10.5.5. Modules MUST NOT have external side effects.</p>

<p>10.5.6. Function declarations MUST be used for private functions instead of function expressions.</p>

<p>10.5.7. Re-declaration of function names MUST NOT be used.</p>

<h2 id="11-testing">11. Testing</h2>

<h3 id="111-white-box-testing-unit-integration-functional">11.1. White-box testing (unit, integration, functional)</h3>

<p>11.1.1. Only public methods SHOULD be tested. Private and protected behavior SHOULD be tested through public methods.</p>

<h3 id="112-unit-testing">11.2. Unit testing</h3>

<p>11.2.1. All objects SHOULD be tested in isolation.</p>

<p>11.2.2. <code class="highlighter-rouge">ObjectManager</code> MUST NOT be used in unit tests.</p>

<p>11.2.3. <code class="highlighter-rouge">ObjectManagerHelper</code> MAY BE used to automatically mock all dependencies of the object under test.</p>

<h2 id="12-web-api">12. Web API</h2>

<p>12.1. Both REST and SOAP API’s MUST be exposed.</p>

<p>12.2. All <span term-uuid="377dc0a3-b8a7-4dfa-808e-2de37e4c0029" class="glossary-term" data-toggle="popover">Web API</span> GET endpoints MUST return lists of entities.</p>

<h2 id="13-command-line-interface-cli">13. Command line interface (CLI)</h2>

<p>13.1. Magento 2 <a href="/guides/v2.0/extension-dev-guide/cli-cmds/cli-naming-guidelines.html">CLI Command Naming Guidelines</a> MUST be followed.</p>

<p>13.2. A CLI command MUST be created for any functionality intended to be used by a system integrator/system administrator/developer (for example: change indexer mode, generate a configuration file, etc.).</p>

<p>13.3. A CLI command MUST always run in a global area. If a command needs a specific area to perform its functions, such area SHOULD be set up before execution.</p>

<p>13.4. Exception in a single CLI command SHOULD NOT break the CLI framework; running other commands SHOULD still be possible.</p>

<h2 id="14-events">14. Events</h2>

<p>14.1. All values (including objects) passed to an <span term-uuid="c57aef7c-97b4-4b2b-a999-8001accef1fe" class="glossary-term" data-toggle="popover">event</span> MUST NOT be modified in the event observer. Instead, plugins SHOULD BE used for modifying the input or output of a function.</p>

<div class="collapsible"><b class="collapsible-title">Example: </b><div class="collapsible-content"><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">SampleEventObserverThatModifiesInputs</span>
<span class="p">{</span>
    <span class="sd">/**
     * @param \Magento\Framework\Event\Observer $observer
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">execute</span><span class="p">(</span><span class="nx">\Magento\Framework\Event\Observer</span> <span class="nv">$observer</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="sd">/** @var \Magento\Framework\App\DataObject $transport */</span>
        <span class="nv">$transport</span> <span class="o">=</span> <span class="nv">$observer</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">(</span><span class="s1">'transport'</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$transport</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">(</span><span class="s1">'some_value'</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="sd">/**
             * Expecting this value to go back to the original event dispatcher violates
             * this rule. Other observers could change the data, or Magento could make
             * architectural changes always sending immutable objects.
             */</span>
            <span class="nv">$transport</span><span class="o">-&gt;</span><span class="na">setData</span><span class="p">(</span><span class="s1">'output_return_value'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
</div></div>
<hr />

<p start="14.2">14.2. Events used SHOULD be observed as specifically as possible. A <code class="highlighter-rouge">global</code> subscription to an event SHOULD NOT be used when the area impacted is just <code class="highlighter-rouge">frontend</code>.</p>

<!-- LINKS: DEFINITIONS AND ADDRESSES -->


			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.0/coding-standards/technical-guidelines.md" target="_blank">
        Edit this page on GitHub
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.0/coding-standards/technical-guidelines.html" target="_blank">Give us feedback</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.0/contributor-guide/contributing_docs.html">Become a Contributor</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
  <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
  <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
  <li><a href="/guides/v2.0/release-notes/bk-release-notes.html">Release Notes</a></li>
  <li><a href="/magento-third-party.html">Third-Party Licenses</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>



<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>




</body>
</html>
