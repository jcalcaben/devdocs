<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Dependency injection | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>



<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>

<!-- Hotjar Tracking Code for http://devdocs.magento.com/ -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:806243,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<!-- heap analytics -->
<script type="text/javascript">
      window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
      heap.load("2619540280");
</script>




	<link rel="canonical" href="/guides/v2.0/extension-dev-guide/depend-inj.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.0/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.0">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.0
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/extension-dev-guide/depend-inj.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/extension-dev-guide/depend-inj.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/extension-dev-guide/depend-inj.html">Magento 2.2</a></li>
	
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/extension-dev-guide/depend-inj.html">Magento 2.3 Pre-release</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.0/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
          
          <li><a href="/guides/v2.0/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          
          <li><a href="/guides/v2.0/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li><a href="/guides/v2.0/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a></li>
          <li><a href="/magento-release-information.html">Release Information</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">Backend</div>
        <ul>
          <li><a href="/guides/v2.0/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li><a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.0/mrg/intro.html">Module Reference Guide</a></li>
          <li><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          <li><a href="/guides/v2.0/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Frontend</div>
        <ul>
          <li class=""><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li><a href="/guides/v2.0/ui-components/ui-component.html">UI Components</a></li>
          
          <li><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li><a href="/guides/v2.0/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li><a href="/guides/v2.0/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
          <li><a href="https://magento-research.github.io/pwa-devdocs/">PWA Studios</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.0/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li><a href="/guides/v2.0/rest/bk-rest.html">REST API Reference</a></li>
          <li><a href="/guides/v2.0/soap/bk-soap.html">SOAP API Reference</a></li>
          
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/test/testing.html">Magento Testing Guide</a></li>
        
        <li><a href="/guides/v2.0/mtf/mtf_introduction.html">Functional Testing</a></li>
        <li><a href="/guides/v2.0/test/integration/integration_test_execution.html">Integration Testing</a></li>
        <li><a href="/guides/v2.0/test/js/jasmine.html">JavaScript Unit Testing</a></li>
        <li><a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
        <li><a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
        
        <li><a href="/guides/v2.0/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">Payment Integrations</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.0/howdoi/bk-how-do-i.html">How To</a></li>
        

        <li><a href="/videos/">Video Tutorials</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.0/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

    

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title">PHP Developer Guide</h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="introduction">
    

    
    <a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">Introduction</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="developer-roadmap">

            

            
            <a href="/guides/v2.0/extension-dev-guide/intro/developers_roadmap.html">Developer roadmap</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="introduction-to-composer">

            

            
            <a href="/guides/v2.0/extension-dev-guide/intro/intro-composer.html">Introduction to Composer</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="glossary-of-common-terms">

            

            
            <a href="/guides/v2.0/extension-dev-guide/intro/intro-composer-gloss.html">Glossary of common terms</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="prepare-(development-quick-start)">
    

    
    <a href="/guides/v2.0/extension-dev-guide/prepare/prepare.html">Prepare (development quick start)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="component-types">

            

            
            <a href="/guides/v2.0/extension-dev-guide/prepare/dev-modtypes.html">Component types</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="about-component-file-structure">

            

            
            <a href="/guides/v2.0/extension-dev-guide/prepare/prepare_file-str.html">About component file structure</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="roadmap-for-developing-and-packaging-components">

            

            
            <a href="/guides/v2.0/extension-dev-guide/prepare/dev-summary.html">Roadmap for developing and packaging components</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="extension-lifecycle">

            

            
            <a href="/guides/v2.0/extension-dev-guide/prepare/lifecycle.html">Extension lifecycle</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="build">
    

    
    <a href="/guides/v2.0/extension-dev-guide/build/build.html">Build</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="the-di.xml-file">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/di-xml-file.html">The di.xml file</a>
            

            
        </li>
        
        
        
        
        
        
        <li class="nav-level2  " id="the-composer.json-file">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/composer-integration.html">The composer.json file</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="define-your-configuration-files">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/required-configuration-files.html">Define your configuration files</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="create-your-component-file-structure">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/module-file-structure.html">Create your component file structure</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="register-your-component">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/component-registration.html">Register your component</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="urn-schema-validation">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/XSD-XML-validation.html">URN schema validation</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="name-your-component">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/create_component.html">Name your component</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="component-load-order">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/module-load-order.html">Component load order</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="enable-or-disable-your-component">

            

            
            <a href="/guides/v2.0/extension-dev-guide/build/enable-module.html">Enable or disable your component</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="package">
    

    
    <a href="/guides/v2.0/extension-dev-guide/package/package.html">Package</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="package-a-component">

            

            
            <a href="/guides/v2.0/extension-dev-guide/package/package_module.html">Package a component</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="upload-your-component-to-the-magento-marketplace">

            

            
            <a href="/guides/v2.0/extension-dev-guide/package/package_mktpl.html">Upload your component to the Magento Marketplace</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="validate">
    

    
    <a href="/guides/v2.0/extension-dev-guide/validate/validate.html">Validate</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="test-your-component">

            

            
            <a href="/guides/v2.0/extension-dev-guide/validate/test-module.html">Test your component</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="partial-caching">
    

    
    <a href="/guides/v2.0/extension-dev-guide/cache/partial-caching.html">Partial caching</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="create-custom-cache-engines">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cache/partial-caching/database-caching.html">Create custom cache engines</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="create-a-cache-type">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cache/partial-caching/create-cache-type.html">Create a cache type</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="full-page-caching">
    

    
    <a href="/guides/v2.0/extension-dev-guide/cache/page-caching.html">Full page caching</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="public-content">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cache/page-caching/public-content.html">Public content</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="private-content">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cache/page-caching/private-content.html">Private content</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="add-cli-commands">
    

    
    <a href="/guides/v2.0/extension-dev-guide/cli-cmds/cli-add.html">Add CLI commands</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="command-naming-guidelines">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cli-cmds/cli-naming-guidelines.html">Command naming guidelines</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="how-to-add-cli-commands">

            

            
            <a href="/guides/v2.0/extension-dev-guide/cli-cmds/cli-howto.html">How to add CLI commands</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

		    
		    	

<li class="nav-level1  " id="component-development">
    

    
    <a href="/guides/v2.0/extension-dev-guide/module-development.html">Component development</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="service-contracts">

            

            
            <a href="/guides/v2.0/extension-dev-guide/service-contracts/service-contracts.html">Service contracts</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="public-interfaces-&amp;-apis">

            

            
            <a href="/guides/v2.0/extension-dev-guide/api-concepts.html">Public interfaces &amp; APIs</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="service-contract-design-patterns">

            

            
            <a href="/guides/v2.0/extension-dev-guide/service-contracts/design-patterns.html">Service contract design patterns</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2 active " id="dependency-injection">

            

            
            <a href="/guides/v2.0/extension-dev-guide/depend-inj.html">Dependency injection</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="objectmanager">

            

            
            <a href="/guides/v2.0/extension-dev-guide/object-manager.html">ObjectManager</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="events-and-observers">

            

            
            <a href="/guides/v2.0/extension-dev-guide/events-and-observers.html">Events and observers</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="factories">

            

            
            <a href="/guides/v2.0/extension-dev-guide/factories.html">Factories</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="proxies">

            

            
            <a href="/guides/v2.0/extension-dev-guide/proxies.html">Proxies</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="code-generation">

            

            
            <a href="/guides/v2.0/extension-dev-guide/code-generation.html">Code generation</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="eav-and-extension-attributes">

            

            
            <a href="/guides/v2.0/extension-dev-guide/attributes.html">EAV and extension attributes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="plugins-(interceptors)">

            

            
            <a href="/guides/v2.0/extension-dev-guide/plugins.html">Plugins (Interceptors)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="routing">

            

            
            <a href="/guides/v2.0/extension-dev-guide/routing.html">Routing</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="indexing">

            

            
            <span>Indexing</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="indexing-overview">
                    

                    
                    <a  href="/guides/v2.0/extension-dev-guide/indexing.html">Indexing overview</a>
                    

                    
                </li>
                
                

                
                

                
                
                <li class="nav-level3  " id="adding-a-custom-indexer">
                    

                    
                    <a  href="/guides/v2.0/extension-dev-guide/indexing-custom.html">Adding a custom indexer</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        
        
        <li class="nav-level2  " id="message-queues">

            

            
            <span>Message Queues</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="message-queues-overview">
                    

                    
                    <a  href="/guides/v2.0/extension-dev-guide/message-queues/message-queues.html">Message queues overview</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="configure-message-queues">
                    

                    
                    <a  href="/guides/v2.0/extension-dev-guide/message-queues/config-mq.html">Configure message Queues</a>
                    

                    
                </li>
                
                

                
                

                
                

                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="adding-extension-attributes-to-entity">

            

            
            <a href="/guides/v2.0/extension-dev-guide/extension_attributes/adding-attributes.html">Adding extension attributes to entity</a>
            

            
        </li>
        
        
        
        
        
        
        <li class="nav-level2  " id="configure-services-as-web-apis">

            

            
            <a href="/guides/v2.0/extension-dev-guide/service-contracts/service-to-web-service.html">Configure services as web APIs</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="clear-directories-during-development">

            

            
            <a href="/guides/v2.0/howdoi/php/php_clear-dirs.html">Clear directories during development</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="adapters">

            

            
            <a href="/guides/v2.0/extension-dev-guide/adapters.html">Adapters</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="variable-pool">

            

            
            <a href="/guides/v2.0extension-dev-guide/variable-pool/">Variable Pool</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

		    
		    	

		    
		    	

<li class="nav-level1  " id="security">
    

    
    <span>Security</span>
    

    
    <ul>
        
        
        
        
        
        <li class="nav-level2  " id="non-secure-functions">

            

            
            <a href="/guides/v2.0/extension-dev-guide/security/non-secure-functions.html">Non-secure functions</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="versioning">
    

    
    <a href="/guides/v2.0/extension-dev-guide/versioning/">Versioning</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="module-version-dependencies">

            

            
            <a href="/guides/v2.0/extension-dev-guide/versioning/dependencies.html">Module version dependencies</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="codebase-changes">

            

            
            <a href="/guides/v2.0/extension-dev-guide/versioning/codebase-changes.html">Codebase changes</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

      <li class="breadcrumb-item"><a class="breadcrumb-item" href="/guides/v2.0/"><span>Home</span></a></li>

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">
            <span property="name">PHP Developer Guide</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Dependency injection</span>

        

        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>



	

	

	<h1 class="page-heading">Dependency injection</h1>

  


</section>

			<p>Magento 2 uses <a href="https://en.wikipedia.org/wiki/Dependency_injection">Dependency Injection</a> to replace functionality provided by the <code class="highlighter-rouge">Mage</code> class in Magento 1.x.</p>

<p>Dependency Injection is a design pattern that allows an object A to declare its dependencies to an external object B that supplies those dependencies.
The dependencies declared by A are usually class interfaces and the dependencies B provides are the concrete implementations for those interfaces.</p>

<p>This allows for loose coupling of code because object A no longer needs to be concerned with initializing its own dependencies.
Object B decides which implementations to provide to object A based on a configuration or desired behavior.</p>

<p>This is an important concept to understand for extension developers because it forms the basis of how Magento composes its classes.</p>

<h2 id="dependency-inversion-principle">Dependency inversion principle</h2>

<p>Follow the <a href="http://www.oodesign.com/dependency-inversion-principle.html">dependency inversion principle</a> and use abstractions in your code to reduce code dependencies.
This means that your high level classes should use the interfaces of low level classes instead of working with them directly.</p>

<p>Using interfaces in your code reduces the risk of incompatibility bugs when Magento changes the underlying implementation of those interfaces.
It also lets you focus on what a class does instead of how its implemented.</p>

<p>Since the Magento codebase follows this principle, you can map your own implementation of a Magento interface to a dependent class or service using the <a href="/guides/v2.0/extension-dev-guide/build/di-xml-file.html"><code class="highlighter-rouge">di.xml</code></a> file.</p>

<h2 id="object-manager">Object manager</h2>

<p>The <a href="/guides/v2.0/extension-dev-guide/object-manager.html"><code class="highlighter-rouge">ObjectManager</code></a> is a Magento service class that instantiates objects at the beginning of the bootstrapping process.</p>

<p>Magento uses class constructor signatures to retrieve information about an object’s constructor dependencies.
When a class is constructed, the object manager injects the class’s dependencies, defined in the <code class="highlighter-rouge">di.xml</code> file, into the class constructor.</p>

<p>Since the object manager provides its service indirectly, your class should not depend on the <code class="highlighter-rouge">ObjectManager</code> object itself.
The only exceptions are custom factories with complex logic and integration tests that need environment setup.</p>

<h2 id="compiling-dependencies">Compiling dependencies</h2>

<p>Magento uses its <a href="/guides/v2.0/config-guide/cli/config-cli-subcommands-compiler.html">code compiler tool</a> to collect all class dependency information and stores it in files.
During the class creation process, the object manager uses this information to create concrete objects in the application.</p>

<p>Service classes that do not exist in the codebase, such as <a href="/guides/v2.0/extension-dev-guide/proxies.html">proxies</a>, <a href="/guides/v2.0/extension-dev-guide/factories.html">factories</a>, and <a href="/guides/v2.0/extension-dev-guide/plugins.html">interceptors</a> that are declared in code or in a configuration, are generated with the help of the compiler.</p>

<h2 id="injection-types-used-in-magento">Injection types used in Magento</h2>

<p>The following code sample highlights the two types of dependency injections used in Magento:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="nx">Magento\Backend\Model\Menu</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Builder</span>
<span class="p">{</span>
    <span class="sd">/**
     * @param \Magento\Backend\Model\Menu\Item\Factory $menuItemFactory
     * @param \Magento\Backend\Model\Menu $menu
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">(</span>
        <span class="nx">Magento\Backend\Model\Menu\Item\Factory</span> <span class="nv">$menuItemFactory</span><span class="p">,</span>  <span class="c1">// Service dependency
</span>        <span class="nx">Magento\Backend\Model\Menu</span> <span class="nv">$menu</span>  <span class="c1">// Service dependency
</span>    <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_itemFactory</span> <span class="o">=</span> <span class="nv">$menuItemFactory</span><span class="p">;</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_menu</span> <span class="o">=</span> <span class="nv">$menu</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">processCommand</span><span class="p">(</span><span class="nx">\Magento\Backend\Model\Menu\Builder\CommandAbstract</span> <span class="nv">$command</span><span class="p">)</span> <span class="c1">// API param
</span>    <span class="p">{</span>
        <span class="c1">// processCommand Code
</span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="constructor-injection">Constructor injection</h3>

<p>In the code sample, the <code class="highlighter-rouge">Builder</code> class declares its dependency on the <code class="highlighter-rouge">Factory</code> and <code class="highlighter-rouge">Menu</code> classes in its constructor.
Magento uses the <code class="highlighter-rouge">di.xml</code> file to determine which implementations to inject into the <code class="highlighter-rouge">Builder</code> class.</p>

<h4 id="optional-dependencies">Optional dependencies</h4>

<p>Optional dependencies are objects that your class uses for specific methods and scenarios.
If a class is expensive to instantiate and your class does not always use it, consider using a <a href="/guides/v2.0/extension-dev-guide/proxies.html">proxy</a>.</p>

<p>You must use constructor dependency injection for all optional and required dependencies of an object.</p>

<h3 id="method-injection">Method injection</h3>

<p>In the code sample, the <code class="highlighter-rouge">Builder</code> class is also dependent on the <code class="highlighter-rouge">CommandAbstract</code> class for its <code class="highlighter-rouge">processCommand()</code> method.</p>

<p>Method injection involves passing in a dependency as a method parameter to use it in the class logic.
When an object needs to perform actions on a dependency that cannot be injected, use method injection.</p>

<h2 id="dependency-types">Dependency types</h2>

<h3 id="injectable">Injectable</h3>

<p>Injectable objects are singleton service objects obtained through dependency injection.
The object manager uses the configuration in the <code class="highlighter-rouge">di.xml</code> file to create these objects and inject them into constructors.</p>

<p>Injectable objects can depend on other injectable objects in their constructor as long as the dependency chain does not circle back to the original injectable object.</p>

<h3 id="newablenon-injectable">Newable/non-injectable</h3>

<p>Newable, or non-injectable, objects are objects that cannot be injected.
They are obtained by creating a new class instance every time they are needed.</p>

<p>Transient objects, such as those that require external input from the user or database, fall into this category.
If you attempt to inject these objects, you will either receive an incomplete, incorrect object or an error that the object could not be created.</p>

<p>For example, you cannot depend on a model object, such as <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Catalog/Model/Product.php"><code class="highlighter-rouge">Product</code></a>, because you need to provide a product id or explicitly request a new, empty instance to get a <code class="highlighter-rouge">Product</code> object. 
Since you cannot specify this data in the constructor signature, Magento cannot inject this object.</p>

<p>To get around this limitation, injectable objects can depend on <a href="/guides/v2.0/extension-dev-guide/factories.html">factories</a> that produce newable objects.</p>

<p><strong>Related topics</strong></p>

<ul>
  <li><a href="/guides/v2.0/extension-dev-guide/build/di-xml-file.html">The <code class="highlighter-rouge">di.xml</code> file</a></li>
  <li><a href="/guides/v2.0/extension-dev-guide/object-manager.html">ObjectManager</a></li>
  <li><a href="/guides/v2.0/extension-dev-guide/plugins.html">Plugins</a></li>
  <li><a href="/guides/v2.0/extension-dev-guide/routing.html">Routing</a></li>
  <li><a href="/guides/v2.0/config-guide/bootstrap/magento-bootstrap.html">Magento application initialization and bootstrap</a></li>
  <li><a href="/guides/v2.0/architecture/archi_perspectives/components/modules/mod_depend.html">Module Dependencies</a></li>
  <li><a href="/guides/v2.0/extension-dev-guide/api-concepts.html">Programming concepts</a></li>
</ul>


			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

    
  
    
    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/develop/guides/v2.0/extension-dev-guide/depend-inj.md" target="_blank">
        Edit this page on GitHub
      </a>
    </div>
    
  
    
    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.0/extension-dev-guide/depend-inj.html" target="_blank">Give us feedback</a>
    </div>
    
  
  </div>

	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.0/contributor-guide/contributing_docs.html">Become a Contributor</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
  <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
  <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
  <li><a href="/guides/v2.0/release-notes/bk-release-notes.html">Release Notes</a></li>
  <li><a href="/magento-third-party.html">Third-Party Licenses</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>


<script src="/common/js/devdocs.min.js"></script>



<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>




</body>
</html>
